import{d as a,s as t,r as e,c as s,a as o,o as n,b as l,u,e as r,w as i,f as c,t as d,g as p,h as g,i as v,v as m,F as f,j as _,k as y}from"./index-1d8410b2.js";import{_ as x}from"./muyu.2ded0f4f.js";import{o as T,a as h,b as k,r as S,u as b,_ as j}from"./_plugin-vue_export-helper.d90a8ef7.js";const w=j(a({__name:"index",setup(a){T((async()=>{if(!I.authToken)return t({title:"当前未登录",icon:"error"});w()}));var j=null;h((()=>{I.globalStaticSettings.autoMuYu&&(j=setInterval(P,1e3*I.globalStaticSettings.autoMuYuFrequency))})),k((()=>{j&&clearInterval(j),j=null}));const w=async()=>{if(!I.authToken)return;const a=await S({url:"/sync-data/get/gongde"});console.log(a.data),I.updateUserinfo({...I.userinfo,...a.data}),console.log(I.userinfo)},I=b();var C=!1;const F=e(!1);var G=!1,M=null;const P=async()=>{I.curGongdeAdd(),M&&clearTimeout(M),M=setTimeout((()=>{(async()=>{if(!I.authToken)return;const a=await S({url:"/sync-data/post/gongde",method:"POST",data:{total_gongde:I.userinfo.total_gongde}});console.log(a)})(),M=null}),1111),G||(G=!0,F.value=!0,O.translate(0,-75).opacity(0).step(),B.value=O.export(),setTimeout((()=>{U.translate(0,0).opacity(1).step(),B.value=U.export(),F.value=!1,G=!1}),401)),C||(C=!0,A.scale(.85,.85).step(),q.value=A.export(),setTimeout((()=>{A.scale(1.15,1.15).step(),q.value=A.export()}),60),setTimeout((()=>{A.scale(1,1).step(),q.value=A.export(),C=!1}),120)),Y.paused||Y.stop(),Y.play()},Y=s();Y.src="../../static/muyu.mp3";const q=e(),A=o({duration:60}),B=e(),O=o({duration:400}),U=o({duration:10});return(a,t)=>{const e=_,s=y;return n(),l(f,null,[u(I).authToken?(n(),r(e,{key:0,class:"total-gongde-display"},{default:i((()=>{var a;return[c(" 总功德: "+d(null==(a=u(I).userinfo)?void 0:a.total_gongde),1)]})),_:1})):p("",!0),g(e,{class:"gongde-display"},{default:i((()=>[c(" 本次功德: "+d(u(I).curGongde),1)])),_:1}),g(e,{class:"container"},{default:i((()=>[g(e,{class:"img-ctr",onClick:P},{default:i((()=>[g(e,{class:"tips-text-box",ref:"tipsTextBox"},{default:i((()=>[v(g(e,{class:"tips-content",animation:B.value},{default:i((()=>{var a,t;return[c(" 功德+"+d((null==(t=null==(a=u(I))?void 0:a.globalStaticSettings)?void 0:t.gongdePerCount)||1),1)]})),_:1},8,["animation"]),[[m,F.value]])])),_:1},512),g(s,{animation:q.value,src:x,class:"muyu"},null,8,["animation"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-c3c8ae35"]]);export{w as default};
